---
- name: Load installation tasks
  ansible.builtin.include_tasks: "{{ lookup('ansible.builtin.first_found', params) }}"
  vars:
    params:
      files:
        - "install-{{ ansible_os_family }}.yml"
        - "install-fallback.yml"
      paths:
        - "{{ role_path }}/tasks"

- name: Clone neovim config
  ignore_errors: true # TODO(fk): more fine-grained error handling, only accept if due to modified local clone
  ansible.builtin.git:
    repo: "git@github.com:f-koehler/neovim-config.git"
    dest: "~/.config/nvim"
    version: main
    accept_hostkey: true
